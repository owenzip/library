<?xml version="1.0" encoding="UTF-8"?>
<!--
 - The LIBRARY application build on open source technologis
 - and follow APACHE License 2.0 Jan 2004
 - @author Nhựt Nguyễn
 - @version 1.0
 - @since 15/04/2018
 -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="vn.dntu.library.service.BookService">

    <resultMap id="BookVO" type="BookVO">
        <result property="idSach" column="idsach"/>
        <result property="tenSach" column="tensach"/>
        <result property="giaNhap" column="gianhap"/>
        <result property="tenTacGia" column="tentacgia"/>
        <result property="tenNhaXuatBan" column="tennhaxuatban"/>
        <result property="soLuong" column="soluong"/>
    </resultMap>

    <select id="selectBookTable" resultMap="BookVO">
        SELECT
        sa.idsach,
        sa.tensach,
        sa.gianhap,
        tg.tentacgia,
        xb.tennhaxuatban,
        COUNT(sa.tensach) AS soluong
        FROM sach sa
        LEFT JOIN dmtacgia tg ON sa.idtacgia = tg.idtacgia
        LEFT JOIN dmnhaxuatban xb ON sa.idnhaxuatban = xb.idnhaxuatban
        GROUP BY sa.tensach
    </select>
</mapper>

